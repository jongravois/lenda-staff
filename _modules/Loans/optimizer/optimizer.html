<style>
    .rowed td {
        border: 1px solid #dddddd;
    }

    .totaline td {
        border-top: 1px solid #333333 !important;
        border-bottom: 1px solid #333333 !important;
    }
</style>
<fieldset>
    <legend>Optimizer</legend>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <table class="table">
                    <tr>
                        <td colspan="{{loan.optimized.length + 2}}">
                            <span class="glyphicon glyphicon-plus" ng-click="showCrop()"></span> Add Crop
                            <span>&nbsp;</span>
                        <span class="pull-right">
                            <span>
                                <span class="glyphicons glyphicons-unchecked"
                                      style="cursor:pointer; background-color:#f2f2f2;"
                                      ng-if="!tggl.showRentRows"
                                      ng-click="tggl.showRentRows = !tggl.showRentRows"></span>
                                <span class="glyphicons glyphicons-check"
                                      style="cursor:pointer; background-color:#f2f2f2;"
                                      ng-if="tggl.showRentRows"
                                      ng-click="tggl.showRentRows = !tggl.showRentRows"></span>
                                Rent
                            </span>
                            &nbsp;&nbsp;&nbsp;
                            <span>
                                <span class="glyphicons glyphicons-unchecked"
                                      style="cursor:pointer; background-color:#fee9db;"
                                      ng-if="!tggl.showOverRentRows"
                                      ng-click="tggl.showOverRentRows = !tggl.showOverRentRows"></span>
                            <span class="glyphicons glyphicons-check"
                                  style="cursor:pointer; background-color:#fee9db;"
                                  ng-if="tggl.showOverRentRows"
                                  ng-click="tggl.showOverRentRows = !tggl.showOverRentRows"></span>
                            Rent Ovrd
                        </span>
                        &nbsp;&nbsp;&nbsp;
                        <span>
                            <span class="glyphicons glyphicons-unchecked"
                                  style="cursor:pointer; background-color:#d9eef2;"
                                  ng-if="!tggl.showInsuranceRows"
                                  ng-click="tggl.showInsuranceRows = !tggl.showInsuranceRows"></span>
                        <span class="glyphicons glyphicons-check"
                              style="cursor:pointer; background-color:#d9eef2;"
                              ng-if="tggl.showInsuranceRows"
                              ng-click="tggl.showInsuranceRows = !tggl.showInsuranceRows"></span>
                        Insurance
                        </span>
                        &nbsp;&nbsp;&nbsp;
                        <span>
                            <span class="glyphicons glyphicons-unchecked"
                                  style="cursor:pointer; background-color: #ebf1e0;"
                                  ng-if="!tggl.showCashFlowRows"
                                  ng-click="tggl.showCashFlowRows = !tggl.showCashFlowRows"></span>
                        <span class="glyphicons glyphicons-check"
                              style="cursor:pointer; background-color: #ebf1e0;"
                              ng-if="tggl.showCashFlowRows"
                              ng-click="tggl.showCashFlowRows = !tggl.showCashFlowRows"></span>
                        Relative CF
                        </span>
                        &nbsp;&nbsp;&nbsp;
                        <span>
                            <span class="glyphicons glyphicons-unchecked"
                                  style="cursor:pointer; background-color:#fffed1;"
                                  ng-if="!tggl.showRiskMarginRows"
                                  ng-click="tggl.showRiskMarginRows = !tggl.showRiskMarginRows"></span>
                            <span class="glyphicons glyphicons-check"
                                  style="cursor:pointer; background-color:#fffed1;"
                                  ng-if="tggl.showRiskMarginRows"
                                  ng-click="tggl.showRiskMarginRows = !tggl.showRiskMarginRows"></span>
                            Relative RM
                            </span>
                        </span>
                        </td>
                    </tr>
                </table>

                <table class="table rowed disp-sm">
                    <tbody id="farms">
                    <tr>
                        <td style="width:120px;">State</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.state}}
                        </td>
                        <td class="text-right">
                            <span class="glyphicon glyphicon-plus" ng-click="addFarm()"></span> Add Farm
                        </td>
                    </tr>
                    <tr>
                        <td>County</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.county}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>FSN</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.fsn}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>Practice</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.practice}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>Landlord</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.owner}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>Total Acres</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.acres|number:1}}
                        </td>
                        <td class="text-right">
                            {{loan.fins.total_acres|number:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows">
                        <td>Share Rent</td>
                        <td class="text-right cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.share_rent|flexZeroPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows">
                        <td>Perm to Ins</td>
                        <td class="text-center cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.perm_ins}}
                        </td>
                        <td class="text-right">&nbsp;</td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows">
                        <td>Cash Rent</td>
                        <td class="cBlue" ng-class="gtZero(f.cash_rent)"
                            ng-repeat="f in loan.optimized">
                            {{f.cash_rent|flexCurrency:0}}
                        </td>
                        <td ng-class="gtZero(OptimizerFactory.getTotalCashRent(loan.optimized))">
                            {{OptimizerFactory.getTotalCashRent(loan.optimized)|flexCurrency:0}}
                        </td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows">
                        <td>Waived</td>
                        <td class="cBlue" ng-class="gtZero(f.waived)"
                            ng-repeat="f in loan.optimized">
                            {{f.waived|flexCurrency:0}}
                        </td>
                        <td ng-class="gtZero(OptimizerFactory.getTotalWaived(loan.optimized))">
                            {{OptimizerFactory.getTotalWaived(loan.optimized)|flexCurrency:0}}
                        </td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows">
                        <td>When Due</td>
                        <td class="text-right cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.when_due}}
                        </td>
                        <td class="text-right">&nbsp;</td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows">
                        <td>FSA Pymt</td>
                        <td class="cBlue" ng-class="gtZero(f.fsa_paid)"
                            ng-repeat="f in loan.optimized">
                            {{f.fsa_paid|flexCurrency:0}}
                        </td>
                        <td ng-class="gtZero(loan.fins.total_fsa_payment)">
                            {{loan.fins.total_fsa_payment|flexCurrency:0}}
                        </td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows && user.optimopts.rent_per_acre_ARM">
                        <td>ARM Rent/Ac</td>
                        <td ng-class="gtZero(f.cash_rent_acre_ARM)"
                            ng-repeat="f in loan.optimized">
                            {{f.cash_rent_acre_ARM|flexCurrency:2}}
                        </td>
                        <td class="text-right">&nbsp;</td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows && user.optimopts.rent_per_acre_dist">
                        <td>Dist Rent/Ac</td>
                        <td ng-class="gtZero(f.cash_rent_acre_dist)"
                            ng-repeat="f in loan.optimized">
                            {{f.cash_rent_acre_dist|flexCurrency:2}}
                        </td>
                        <td class="text-right">&nbsp;</td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows && user.optimopts.rent_per_acre_other">
                        <td>3P Rent/Ac</td>
                        <td ng-class="gtZero(f.cash_rent_acre_other)"
                            ng-repeat="f in loan.optimized">
                            {{f.cash_rent_acre_other|flexCurrency:2}}
                        </td>
                        <td class="text-right">&nbsp;</td>
                    </tr>
                    <tr style="background-color: #f2f2f2;"
                        ng-if="tggl.showRentRows && user.optimopts.fsa_per_acre">
                        <td>FSA/Ac</td>
                        <td ng-class="gtZero(f.fsa_acre)"
                            ng-repeat="f in loan.optimized">
                            {{f.fsa_acre|flexCurrency:2}}
                        </td>
                        <td class="text-right">&nbsp;</td>
                    </tr>
                    </tbody>

                    <!-- CROP DIVIDER-->
                    <tr>
                        <td colspan="{{loan.optimized.length + 2}}">
                            <strong>CROPS</strong>
                        </td>
                    </tr>

                    <!--<tbody id="corn" ng-if="tggl.tcropCorn">
                    <tr>
                        <td>Corn</td>
                        <td class="cBlue" ng-class="gtZero(f.crops[1].c_acres)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_acres|flexNumber:1}}
                        </td>
                        <td class="text-right">
                            {{AppFactory.calcAcresCrop( '1', loan)|number:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #fee9db"
                        ng-if="tggl.showOverRentRows">
                        <td>Rent Override</td>
                        <td class="text-right cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_share_rent|flexZeroPercent:1}}
                        </td>
                        <td ng-class="gtZero(OptimizerFactory.getTotalRentOvr(loan.optimized))">
                            {{OptimizerFactory.getTotalRentOvr(loan.optimized)|flexPercent:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows">
                        <td>APH</td>
                        <td class="cBlue" ng-class="gtZero(f.crops[1].c_aph)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_aph|number:1}}
                        </td>
                        <td ng-class="gtZero(AppFactory.calcAPHCrop( '1', loan))">
                            {{AppFactory.calcAPHCrop( '1', loan)|flexNumber:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_share">
                        <td>Ins Share</td>
                        <td ng-class="gtZero(f.crops[1].c_ins_share)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_ins_share|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_price">
                        <td>Ins Price</td>
                        <td ng-class="gtZero(f.crops[1].c_ins_price)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_ins_price|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_level">
                        <td>Ins Level</td>
                        <td ng-class="gtZero(f.crops[1].c_ins_level)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_ins_level|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_guarantee">
                        <td>Ins Guarantee</td>
                        <td ng-class="gtZero(OptimizerFactory.calcInsGuarantee(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{OptimizerFactory.calcInsGuarantee(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_premium">
                        <td>Ins Premium</td>
                        <td ng-class="gtZero(f.crops[1].c_ins_premium)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_ins_premium|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_value">
                        <td>Ins Value</td>
                        <td ng-class="gtZero(f.crops[1].c_ins_value)"
                            ng-repeat="f in loan.optimized">
                            {{OptimizerFactory.calcInsValue(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_type">
                        <td>Ins Type</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_ins_type}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.sco_max">
                        <td>SCO Max</td>
                        <td ng-class="gtZero(calcScoMax(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcScoMax(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_yield">
                        <td>Prod Yield</td>
                        <td ng-class="gtZero(f.crops[1].c_prod_yield)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_prod_yield|number:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_share">
                        <td>Prod Share</td>
                        <td ng-class="gtZero(f.crops[1].c_prod_share)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_prod_share|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_price">
                        <td>Prod Price</td>
                        <td ng-class="gtZero(f.crops[1].c_prod_price)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_prod_price|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.var_harvest">
                        <td>Var Harvest</td>
                        <td ng-class="gtZero(f.crops[1].c_var_harv)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_var_harv|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.rebate">
                        <td>Rebate</td>
                        <td ng-class="gtZero(f.crops[1].c_rebate)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_rebate|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_rev">
                        <td>Prod Rev</td>
                        <td ng-class="gtZero(f.crops[1].c_prod_rev)"
                            ng-repeat="f in loan.optimized">
                            {{calcProdRevenue(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_rev_adj">
                        <td>Prod Rev Adj</td>
                        <td ng-class="gtZero(f.crops[1].c_prod_rev_adj)"
                            ng-repeat="f in loan.optimized">
                            {{calcProdRevenueAdj(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.budget_ARM">
                        <td>ARM Budget</td>
                        <td ng-class="gtZero(f.crops[1].expenses.arm)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].expenses.arm|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.budget_dist">
                        <td>Dist Budget</td>
                        <td ng-class="gtZero(f.crops[1].expenses.dist)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].expenses.dist|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.budget_other">
                        <td>3P Budget</td>
                        <td ng-class="gtZero(f.crops[1].expenses.other)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].expenses.other|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.fee_ARM">
                        <td>ARM Fee</td>
                        <td ng-class="gtZero(calcFee(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcFee(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.commit_ARM">
                        <td>ARM Commit</td>
                        <td ng-class="gtZero(f.crops[1].expenses.commit_arm)"
                            ng-repeat="f in loan.optimized">
                            {{calcArmCommit(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.commit_dist">
                        <td>Dist Commit</td>
                        <td ng-class="gtZero(f.crops[1].expenses.dist)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].expenses.dist|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.interest_ARM">
                        <td>ARM Est Int</td>
                        <td ng-class="gtZero(calcInterestARM(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcInterestARM(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.interest_dist">
                        <td>Dist Est Int</td>
                        <td ng-class="gtZero(calcInterestDist(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcInterestDist(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.interest_other">
                        <td>3P Est Int</td>
                        <td class="text-center"
                            ng-repeat="f in loan.optimized">
                            {{0|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0">
                        <td>CF</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{calcRelativeCF(f.crops[1], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_crop">
                        <td>Crop Disc</td>
                        <td ng-class="gtZero(f.crops[1].c_crop_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_crop_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_fsa">
                        <td>FSA Disc</td>
                        <td ng-class="gtZero(f.crops[1].c_fsa_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_fsa_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_cropins">
                        <td>Crop Ins Disc</td>
                        <td ng-class="gtZero(f.crops[1].c_cropins_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_cropins_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_nonrp">
                        <td>Non-RP Disc</td>
                        <td ng-class="gtZero(f.crops[1].c_nonrp_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_nonrp_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_sco">
                        <td>SCO Disc</td>
                        <td ng-class="gtZero(f.crops[1].c_sco_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[1].c_sco_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_crop">
                        <td>Disc Crop</td>
                        <td ng-class="gtZero(calcDiscCrop(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscCrop(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_fsa">
                        <td>Disc FSA</td>
                        <td ng-class="gtZero(calcDiscFSA(f.crops[1], f.fsa_acre))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscFSA(f.crops[1], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_insovercrop">
                        <td>Ins>Disc Crop</td>
                        <td ng-class="gtZero(calcDiscInsOverCrop(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscInsOverCrop(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_ins">
                        <td>Disc Ins</td>
                        <td ng-class="gtZero(calcDiscIns(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscIns(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_sco">
                        <td>Disc SCO</td>
                        <td ng-class="gtZero(calcDiscSCO(f.crops[1]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscSCO(f.crops[1])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_collateral">
                        <td>Disc Collateral</td>
                        <td ng-class="gtZero(calcDiscCollateral(f.crops[1], f.fsa_acre))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscCollateral(f.crops[1], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1">
                        <td>RM</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{calcRelativeRM(f.crops[1], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    </tbody>-->

                    <tbody id="cotton" ng-if="tggl.tcropCotton">
                    <tr>
                        <td>Cotton</td>
                        <td class="cBlue" ng-class="gtZero(f.crops[6].c_acres)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_acres|flexNumber:1}}
                        </td>
                        <td class="text-right">
                            {{AppFactory.calcAcresCrop( '6', loan)|number:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #fee9db"
                        ng-if="tggl.showOverRentRows">
                        <td>Rent Override</td>
                        <td class="text-right cBlue"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_share_rent|flexZeroPercent:1}}
                        </td>
                        <td ng-class="gtZero(OptimizerFactory.getTotalRentOvr(loan.optimized))">
                            {{OptimizerFactory.getTotalRentOvr(loan.optimized)|flexPercent:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows">
                        <td>APH</td>
                        <td class="cBlue" ng-class="gtZero(f.crops[6].c_aph)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_aph|number:1}}
                        </td>
                        <td ng-class="gtZero(AppFactory.calcAPHCrop( '6', loan))">
                            {{AppFactory.calcAPHCrop( '6', loan)|flexNumber:1}}
                        </td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_share">
                        <td>Ins Share</td>
                        <td ng-class="gtZero(f.crops[6].c_ins_share)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_ins_share|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_price">
                        <td>Ins Price</td>
                        <td ng-class="gtZero(f.crops[6].c_ins_price)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_ins_price|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_level">
                        <td>Ins Level</td>
                        <td ng-class="gtZero(f.crops[6].c_ins_level)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_ins_level|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_guarantee">
                        <td>Ins Guarantee</td>
                        <td ng-class="gtZero(OptimizerFactory.calcInsGuarantee(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{OptimizerFactory.calcInsGuarantee(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_premium">
                        <td>Ins Premium</td>
                        <td ng-class="gtZero(f.crops[6].c_ins_premium)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_ins_premium|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_value">
                        <td>Ins Value</td>
                        <td ng-class="gtZero(f.crops[6].c_ins_value)"
                            ng-repeat="f in loan.optimized">
                            {{OptimizerFactory.calcInsValue(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.ins_type">
                        <td>Ins Type</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_ins_type}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #d9eef2"
                        ng-if="tggl.showInsuranceRows && user.optimopts.sco_max">
                        <td>SCO Max</td>
                        <td ng-class="gtZero(calcScoMax(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcScoMax(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_yield">
                        <td>Prod Yield</td>
                        <td ng-class="gtZero(f.crops[6].c_prod_yield)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_prod_yield|number:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_share">
                        <td>Prod Share</td>
                        <td ng-class="gtZero(f.crops[6].c_prod_share)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_prod_share|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_price">
                        <td>Prod Price</td>
                        <td ng-class="gtZero(f.crops[6].c_prod_price)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_prod_price|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.var_harvest">
                        <td>Var Harvest</td>
                        <td ng-class="gtZero(f.crops[6].c_var_harv)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_var_harv|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.rebate">
                        <td>Rebate</td>
                        <td ng-class="gtZero(f.crops[6].c_rebate)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_rebate|flexCurrency:4}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_rev">
                        <td>Prod Rev</td>
                        <td ng-class="gtZero(f.crops[6].c_prod_rev)"
                            ng-repeat="f in loan.optimized">
                            {{calcProdRevenue(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.prod_rev_adj">
                        <td>Prod Rev Adj</td>
                        <td ng-class="gtZero(f.crops[6].c_prod_rev_adj)"
                            ng-repeat="f in loan.optimized">
                            {{calcProdRevenueAdj(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.budget_ARM">
                        <td>ARM Budget</td>
                        <td ng-class="gtZero(f.crops[6].expenses.arm)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].expenses.arm|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.budget_dist">
                        <td>Dist Budget</td>
                        <td ng-class="gtZero(f.crops[6].expenses.dist)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].expenses.dist|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.budget_other">
                        <td>3P Budget</td>
                        <td ng-class="gtZero(f.crops[6].expenses.other)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].expenses.other|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.fee_ARM">
                        <td>ARM Fee</td>
                        <td ng-class="gtZero(calcFee(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcFee(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.commit_ARM">
                        <td>ARM Commit</td>
                        <td ng-class="gtZero(f.crops[6].expenses.commit_arm)"
                            ng-repeat="f in loan.optimized">
                            {{calcArmCommit(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.commit_dist">
                        <td>Dist Commit</td>
                        <td ng-class="gtZero(f.crops[6].expenses.dist)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].expenses.dist|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.interest_ARM">
                        <td>ARM Est Int</td>
                        <td ng-class="gtZero(calcInterestARM(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcInterestARM(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.interest_dist">
                        <td>Dist Est Int</td>
                        <td ng-class="gtZero(calcInterestDist(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcInterestDist(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0"
                        ng-if="tggl.showCashFlowRows && user.optimopts.interest_other">
                        <td>3P Est Int</td>
                        <td class="text-center"
                            ng-repeat="f in loan.optimized">
                            {{0|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #ebf1e0">
                        <td>CF</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{calcRelativeCF(f.crops[6], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_crop">
                        <td>Crop Disc</td>
                        <td ng-class="gtZero(f.crops[6].c_crop_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_crop_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_fsa">
                        <td>FSA Disc</td>
                        <td ng-class="gtZero(f.crops[6].c_fsa_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_fsa_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_cropins">
                        <td>Crop Ins Disc</td>
                        <td ng-class="gtZero(f.crops[6].c_cropins_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_cropins_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_nonrp">
                        <td>Non-RP Disc</td>
                        <td ng-class="gtZero(f.crops[6].c_nonrp_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_nonrp_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.percent_disc_sco">
                        <td>SCO Disc</td>
                        <td ng-class="gtZero(f.crops[6].c_sco_disc)"
                            ng-repeat="f in loan.optimized">
                            {{f.crops[6].c_sco_disc|flexPercent:1}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_crop">
                        <td>Disc Crop</td>
                        <td ng-class="gtZero(calcDiscCrop(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscCrop(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_fsa">
                        <td>Disc FSA</td>
                        <td ng-class="gtZero(calcDiscFSA(f.crops[6], f.fsa_acre))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscFSA(f.crops[6], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_insovercrop">
                        <td>Ins>Disc Crop</td>
                        <td ng-class="gtZero(calcDiscInsOverCrop(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscInsOverCrop(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_ins">
                        <td>Disc Ins</td>
                        <td ng-class="gtZero(calcDiscIns(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscIns(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_sco">
                        <td>Disc SCO</td>
                        <td ng-class="gtZero(calcDiscSCO(f.crops[6]))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscSCO(f.crops[6])|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1"
                        ng-if="tggl.showRiskMarginRows && user.optimopts.disc_collateral">
                        <td>Disc Collateral</td>
                        <td ng-class="gtZero(calcDiscCollateral(f.crops[6], f.fsa_acre))"
                            ng-repeat="f in loan.optimized">
                            {{calcDiscCollateral(f.crops[6], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr style="background-color: #fffed1">
                        <td>RM</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{calcRelativeRM(f.crops[6], f.fsa_acre)|flexCurrency:2}}
                        </td>
                        <td>&nbsp;</td>
                    </tr>
                    </tbody>

                    <tbody id="grandTotal">
                    <tr>
                        <td>TOTAL</td>
                        <td class="text-right"
                            ng-repeat="f in loan.optimized">
                            {{f.acres|number:1}}
                        </td>
                        <td class="text-right">
                            {{loan.fins.total_acres|number:1}}
                        </td>
                    </tr>
                    </tbody>
                </table>
                <br/><br/>
            </div>
        </div>
    </div>
</fieldset>