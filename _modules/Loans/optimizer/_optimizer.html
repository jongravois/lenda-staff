<style>
    .colicon{ cursor:pointer; }
    .btn-group {
        border: 1px solid #ccc;
    }
    .btn-group button{
        width: 100px !important;
        min-width: 100px !important;
        max-width: 100px !important;
    }
    .opticon {
        cursor: pointer;
    }
    /*#optim {
        table-layout: fixed;
        width: 3000px;
        white-space: nowrap;
    }
    #optim td {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    #optim .row-locale { width: 60px !important; }
    #optim .row-fsn { width: 30px !important; }
    #optim .row-prac { width: 30px !important; }*/
</style>
<div class="col-md-12" style="width:2700px;">
    <table id="optim" class="table rowed table-condensed disp-sm" style="width:{{getTableWidth()}}px;">
        <tr>
            <th ng-if="!tggl.showFarm">
                Farm&nbsp;<span class="colicon" ng-click="showFarmCols()">&blacktriangleright;</span>
            </th>
            <th colspan="{{spanner.farm}}" ng-if="tggl.showFarm">
                Farm&nbsp;<span class="colicon" ng-click="hideFarmCols()">&triangleright;</span>
            </th>

            <th ng-if="!tggl.showCorn">
                Corn&nbsp;<span class="colicon" ng-click="showCropCols()">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showCorn">
                Corn&nbsp;<span class="colicon" ng-click="hideCropCols()">&triangleright;</span>
            </th>

            <th colspan="5" ng-if="tggl.showSoybeans">
                Soybeans&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>

            <th colspan="5" ng-if="tggl.showSorghum">
                Sorghum&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showWheat">
                Wheat&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showCotton">
                Cotton&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showRice">
                Rice&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showPeanuts">
                Peanuts&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showCane">
                Sugar Cane&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" ng-if="tggl.showSunflowers">
                Sunflowers&nbsp;<span class="colicon">&blacktriangleright;</span>
            </th>
            <th colspan="5" style="width: 20px !important">&nbsp;</th>
        </tr>
        <tr>
            <th ng-if="!tggl.showFarm">FSN</th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showLocale">
                St|Cnty&nbsp;<span class="colicon" ng-click="tggl.showLocale = !tggl.showLocale;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm">FSN</th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showPrac">
                Prac&nbsp;<span class="colicon" ng-click="tggl.showPrac = !tggl.showPrac;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showOwner">
                Landlord&nbsp;<span class="colicon" ng-click="tggl.showOwner = !tggl.showOwner;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showShr">
                Shr&nbsp;<span class="colicon" ng-click="tggl.showShr = !tggl.showShr;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showPerm">
                Perm&nbsp;<span class="colicon" ng-click="tggl.showPerm = !tggl.showPerm;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showCRent">
                $ Rent&nbsp;<span class="colicon" ng-click="tggl.showCRent = !tggl.showCRent;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showDue">
                Due&nbsp;<span class="colicon" ng-click="tggl.showDue = !tggl.showDue;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showWvd">
                Waived&nbsp;<span class="colicon" ng-click="tggl.showWvd = !tggl.showWvd;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th ng-if="tggl.showFarm" ng-show="tggl.showRnta">
                Rent/Ac&nbsp;<span class="colicon" ng-click="tggl.showRnta = !tggl.showRnta;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th class="bright" ng-if="tggl.showFarm" ng-show="tggl.showWvda">
                Waived/Ac&nbsp;<span class="colicon" ng-click="tggl.showWvda = !tggl.showWvda;spanner.farm = spanner.farm - 1;">&blacktriangleleft;</span>
            </th>
            <th class="bleft" ng-if="tggl.showCorn">Acres</th>
            <th ng-if="tggl.showCorn">APH</th>
            <th ng-if="tggl.showCorn">Ovr</th>
            <th ng-if="tggl.showCorn">CF</th>
            <th class="bright" ng-if="tggl.showCorn">EX</th>
            <th ng-if="tggl.showSoybeans">Acres</th>
            <th ng-if="tggl.showSoybeans">APH</th>
            <th ng-if="tggl.showSoybeans">Ovr</th>
            <th ng-if="tggl.showSoybeans">CF</th>
            <th class="bright" ng-if="tggl.showSoybeans">EX</th>
            <th ng-if="tggl.showSorghum">Acres</th>
            <th ng-if="tggl.showSorghum">APH</th>
            <th ng-if="tggl.showSorghum">Ovr</th>
            <th ng-if="tggl.showSorghum">CF</th>
            <th class="bright" ng-if="tggl.showSorghum">EX</th>
            <th ng-if="tggl.showWheat">Acres</th>
            <th ng-if="tggl.showWheat">APH</th>
            <th ng-if="tggl.showWheat">Ovr</th>
            <th ng-if="tggl.showWheat">CF</th>
            <th class="bright" ng-if="tggl.showWheat">EX</th>
            <th ng-if="tggl.showCotton">Acres</th>
            <th ng-if="tggl.showCotton">APH</th>
            <th ng-if="tggl.showCotton">Ovr</th>
            <th ng-if="tggl.showCotton">CF</th>
            <th class="bright" ng-if="tggl.showCotton">EX</th>
            <th ng-if="tggl.showRice">Acres</th>
            <th ng-if="tggl.showRice">APH</th>
            <th ng-if="tggl.showRice">Ovr</th>
            <th ng-if="tggl.showRice">CF</th>
            <th class="bright" ng-if="tggl.showRice">EX</th>
            <th ng-if="tggl.showPeanuts">Acres</th>
            <th ng-if="tggl.showPeanuts">APH</th>
            <th ng-if="tggl.showPeanuts">Ovr</th>
            <th ng-if="tggl.showPeanuts">CF</th>
            <th class="bright" ng-if="tggl.showPeanuts">EX</th>
            <th ng-if="tggl.showCane">Acres</th>
            <th ng-if="tggl.showCane">APH</th>
            <th ng-if="tggl.showCane">Ovr</th>
            <th ng-if="tggl.showCane">CF</th>
            <th class="bright" ng-if="tggl.showCane">EX</th>
            <th ng-if="tggl.showSunflowers">Acres</th>
            <th ng-if="tggl.showSunflowers">APH</th>
            <th ng-if="tggl.showSunflowers">Ovr</th>
            <th ng-if="tggl.showSunflowers">CF</th>
            <th class="bright" ng-if="tggl.showSunflowers">EX</th>
            <th style="width: 20px !important">&nbsp;</th>
        </tr>
        <tr ng-repeat="u in loan.farmunits">
            <td class="text-center" style="width:40px;" ng-if="!tggl.showFarm">
                {{u.fsn}}
            </td>
            <td class="text-left" style="width:200px;" ng-if="tggl.showFarm" ng-show="tggl.showLocale">
                {{u.state}} | {{u.county}}
            </td>
            <td class="text-center" style="width:40px;" ng-if="tggl.showFarm">
                {{u.fsn}}
            </td>
            <td class="text-center" style="width:40px;" ng-if="tggl.showFarm" ng-show="tggl.showPrac">
                {{u.practice}}
            </td>
            <td class="text-center" style="width:80px;" ng-if="tggl.showFarm" ng-show="tggl.showOwner">
                {{u.owner}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.rent_ovr)" style="width:50px;" ng-if="tggl.showFarm" ng-show="tggl.showShr">
                {{u.rent_ovr|flexPercent:1}}
            </td>
            <td class="text-center cBlue" style="width:40px;" ng-if="tggl.showFarm" ng-show="tggl.showPerm">
                {{u.perm2ins|booleanYN}}
            </td>
            <td ng-class="AppFactory.gtZero(u.cash_rent)" style="width:80px;" ng-if="tggl.showFarm" ng-show="tggl.showCRent">
                {{u.cash_rent|flexCurrency:0}}
            </td>
            <td class="text-center" style="width:120px;" ng-if="tggl.showFarm" ng-show="tggl.showDue">
                {{u.when_due}}
            </td>
            <td ng-class="AppFactory.gtZero(u.waived)" style="width:80px;" ng-if="tggl.showFarm" ng-show="tggl.showWvd">
                {{u.waived|flexCurrency:0}}
            </td>
            <td ng-class="AppFactory.gtZero(u.cash_rent_acre_ARM)" style="width:60px;" ng-if="tggl.showFarm" ng-show="tggl.showRnta">
                {{u.cash_rent_acre_ARM|flexCurrency:0}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.waived_acre)" style="width:60px;" ng-if="tggl.showFarm" ng-show="tggl.showWvda">
                {{u.waived_acre|flexCurrency:0}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].corn.acres)" style="width:60px;" ng-if="tggl.showCorn">
                {{u.crops[0].corn.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].corn.aph)" style="width:60px;" ng-if="tggl.showCorn">
                {{u.crops[0].corn.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].corn.override)" style="width:30px;" ng-if="tggl.showCorn">
                {{u.crops[0].corn.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].corn.CF)" style="width:60px;" ng-if="tggl.showCorn">
                {{u.crops[0].corn.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].corn.EX)" style="width:80px;" ng-if="tggl.showCorn">
                {{u.crops[0].corn.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].soybeans.acres)" style="width:60px;" ng-if="tggl.showSoybeans">
                {{u.crops[0].soybeans.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].soybeans.aph)" style="width:60px;" ng-if="tggl.showSoybeans">
                {{u.crops[0].soybeans.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].soybeans.override)" style="width:30px;" ng-if="tggl.showSoybeans">
                {{u.crops[0].soybeans.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].soybeans.CF)" style="width:60px;" ng-if="tggl.showSoybeans">
                {{u.crops[0].soybeans.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].soybeans.EX)" style="width:80px;" ng-if="tggl.showSoybeans">
                {{u.crops[0].soybeans.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].sorghum.acres)" style="width:60px;" ng-if="tggl.showSorghum">
                {{u.crops[0].sorghum.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].sorghum.aph)" style="width:60px;" ng-if="tggl.showSorghum">
                {{u.crops[0].sorghum.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].sorghum.override)" style="width:30px;" ng-if="tggl.showSorghum">
                {{u.crops[0].sorghum.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].sorghum.CF)" style="width:60px;" ng-if="tggl.showSorghum">
                {{u.crops[0].sorghum.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].sorghum.EX)" style="width:80px;" ng-if="tggl.showSorghum">
                {{u.crops[0].sorghum.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].wheat.acres)" style="width:60px;" ng-if="tggl.showWheat">
                {{u.crops[0].wheat.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].wheat.aph)" style="width:60px;" ng-if="tggl.showWheat">
                {{u.crops[0].wheat.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].wheat.override)" style="width:30px;" ng-if="tggl.showWheat">
                {{u.crops[0].wheat.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].wheat.CF)" style="width:60px;" ng-if="tggl.showWheat">
                {{u.crops[0].wheat.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].wheat.EX)" style="width:80px;" ng-if="tggl.showWheat">
                {{u.crops[0].wheat.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].cotton.acres)" style="width:60px;" ng-if="tggl.showCotton">
                {{u.crops[0].cotton.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].cotton.aph)" style="width:60px;" ng-if="tggl.showCotton">
                {{u.crops[0].cotton.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].cotton.override)" style="width:30px;" ng-if="tggl.showCotton">
                {{u.crops[0].cotton.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].cotton.CF)" style="width:60px;" ng-if="tggl.showCotton">
                {{u.crops[0].cotton.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].cotton.EX)" style="width:80px;" ng-if="tggl.showCotton">
                {{u.crops[0].cotton.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].rice.acres)" style="width:60px;" ng-if="tggl.showRice">
                {{u.crops[0].rice.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].rice.aph)" style="width:60px;" ng-if="tggl.showRice">
                {{u.crops[0].rice.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].rice.override)" style="width:30px;" ng-if="tggl.showRice">
                {{u.crops[0].rice.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].rice.CF)" style="width:60px;" ng-if="tggl.showRice">
                {{u.crops[0].rice.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].rice.EX)" style="width:80px;" ng-if="tggl.showRice">
                {{u.crops[0].rice.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].peanuts.acres)" style="width:60px;" ng-if="tggl.showPeanuts">
                {{u.crops[0].peanuts.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].peanuts.aph)" style="width:60px;" ng-if="tggl.showPeanuts">
                {{u.crops[0].peanuts.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].peanuts.override)" style="width:30px;" ng-if="tggl.showPeanuts">
                {{u.crops[0].peanuts.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].peanuts.CF)" style="width:60px;" ng-if="tggl.showPeanuts">
                {{u.crops[0].peanuts.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].peanuts.EX)" style="width:80px;" ng-if="tggl.showPeanuts">
                {{u.crops[0].peanuts.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].sugarcane.acres)" style="width:60px;" ng-if="tggl.showCane">
                {{u.crops[0].sugarcane.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].sugarcane.aph)" style="width:60px;" ng-if="tggl.showCane">
                {{u.crops[0].sugarcane.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].sugarcane.override)" style="width:30px;" ng-if="tggl.showCane">
                {{u.crops[0].sugarcane.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].sugarcane.CF)" style="width:60px;" ng-if="tggl.showCane">
                {{u.crops[0].sugarcane.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].sugarcane.EX)" style="width:80px;" ng-if="tggl.showCane">
                {{u.crops[0].sugarcane.EX|flexCurrency:2}}
            </td>

            <td class="bleft cBlue" ng-class="AppFactory.gtZero(u.crops[0].sunflowers.acres)" style="width:60px;" ng-if="tggl.showSunflowers">
                {{u.crops[0].sunflowers.acres|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].sunflowers.aph)" style="width:60px;" ng-if="tggl.showSunflowers">
                {{u.crops[0].sunflowers.aph|flexNumber:1}}
            </td>
            <td class="cBlue" ng-class="AppFactory.gtZero(u.crops[0].sunflowers.override)" style="width:30px;" ng-if="tggl.showSunflowers">
                {{u.crops[0].sunflowers.override|flexPercent:1}}
            </td>
            <td ng-class="AppFactory.gtZero(u.crops[0].sunflowers.CF)" style="width:60px;" ng-if="tggl.showSunflowers">
                {{u.crops[0].sunflowers.CF|flexCurrency:2}}
            </td>
            <td class="bright" ng-class="AppFactory.gtZero(u.crops[0].sunflowers.EX)" style="width:80px;" ng-if="tggl.showSunflowers">
                {{u.crops[0].sunflowers.EX|flexCurrency:2}}
            </td>

            <td class="text-center">
                <span style="font-size: 16px; color: #990000;" ng-click="deleteFarmunit(u.id)">&cross;</span>
            </td>
        </tr>
    </table>
</div>
<div class="row" style="margin-left: 20px;">
    <p>
        <a ng-click="createNewUnit()" class="btn btn-xs btn-default">
            <span class="glyphicons glyphicons-circle-plus" style="color:#006837;"></span> Add New</a>
    </p>
</div>