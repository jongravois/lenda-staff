<table class="table table-striped rowed disp-sm">
    <!-- TODO: HARD CODED FOR COSMETIC APPROVAL-->
    <tr>
        <th style="width:3%;">&nbsp;</th>
        <th class="text-center" style="width:10%;">Date</th>
        <th class="text-center" style="width:10%;">ARM Budget</th>
        <th class="text-center" style="width:10%;">{{loan.distributor.distributor}} Budget</th>
        <th class="text-center" style="width:10%;">Fees</th>
        <th class="text-center" style="width:10%;">Commitment</th>
        <th class="text-center" style="width:10%;">Change</th>
        <th class="text-center" style="width:10%;">Change %</th>
    </tr>
    <tr>
        <td class="text-center">
            <span class="staticon glyphicons glyphicons-wrench" style="color: #009;"></span>
        </td>
        <td class="text-right">
            <a href="#/edit/{{a.loan_type_id}}/{{a.id}}/summary">
                {{loan.app_date|date:'MM/dd/yyyy'}}
            </a>
        </td>
        <td class="text-right">
            {{loan.fins.principal_arm|flexCurrency:0}}
        </td>
        <td class="text-right">
            {{loan.fins.principal_dist|flexCurrency:0}}
        </td>
        <td class="text-right">
            {{((loan.fins.commit_arm+loan.fins.commit_dist)-loan.addendums[loan.addendums.length - 1].arm_and_dist)*((loan.fins.fee_processing+loan.fins.fee_service)/100)|flexCurrency:0}}
        </td>
        <td class="text-right">
            {{loan.fins.commit_arm+loan.fins.commit_dist|flexCurrency:0}}
        </td>
        <td ng-class="AppFactory.gtZero((loan.fins.commit_arm+loan.fins.commit_dist)-loan.addendums[loan.addendums.length - 1].arm_and_dist)">
            {{(loan.fins.commit_arm+loan.fins.commit_dist)-loan.addendums[loan.addendums.length - 1].arm_and_dist|flexCurrency:0}}
        </td>
        <td ng-class="AppFactory.gtZero(loan.addendums[loan.addendums.length - 1].principal_arm / loan.fins.principal_arm)">
            {{loan.addendums[loan.addendums.length - 1].principal_arm / loan.fins.principal_arm|flexPercent:1}}
        </td>
    </tr>

    <!--EARLIER ADDENDUMS AND ORIGINAL-->
    <tr ng-repeat="a in loan.addendums | orderBy: 'app_date':true">
        <td class="text-center">
            <span class="glyphicons glyphicons-record" tooltip="Original Loan" style="color: #333;" ng-if="a.addendum_type == '1'"></span>
            <span class="glyphicons glyphicons-plus" tooltip="Loan Addendum" style="color: #333;" ng-if="a.addendum_type == '2'"></span>
            <span class="glyphicons glyphicons-usd" tooltip="Reconciliation Addendum" style="color: #333;" ng-if="a.addendum_type == '3'"></span>
        </td>
        <td class="text-right">
            <a href="#/edit/{{a.loan_type_id}}/{{a.id}}/summary">
                {{a.app_date|date:'MM/dd/yyyy'}}
            </a>
        </td>
        <td class="text-right">
            {{a.principal_arm|flexCurrency:0}}
        </td>
        <td class="text-right">
            {{a.principal_dist|flexCurrency:0}}
        </td>
        <td class="text-right">
            {{AppFactory.calcAddendumFee(a, loan)|flexCurrency:0}}
        </td>
        <td class="text-right">
            {{a.arm_and_dist|flexCurrency:0}}
        </td>
        <td ng-class="AppFactory.gtZero(AppFactory.calcAddendumDiff(a, loan))">
            {{AppFactory.calcAddendumDiff(a, loan)|flexCurrency:0}}
        </td>
        <td ng-class="AppFactory.gtZero(AppFactory.calcAddendumPCDiff(a, loan))">
            {{AppFactory.calcAddendumPCDiff(a, loan)|flexPercent:1}}
        </td>
    </tr>
</table>